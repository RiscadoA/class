proc main() {
  cut {
    println("close");
    close a
    |a: wait|
    send x(a);
    close x
    |x: recv wait; wait|
    recv x(a);
    wait x;
    send y(a);
    close y
    |y: recv wait; wait|
    recv y(a);
    wait y;
    wait a;
    ()
  }
};;
