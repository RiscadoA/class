proc main() {
    cut {
        cell x("1")
        |x: ~state lstring|
        share x {
            take x(s); println(s);
            put x("2");
            sleep 2;
            take x(s); println(s);
            put x("4");
            release x
            ||
            sleep 1;
            take x(s); println(s);
            put x("3");
            sleep 2;
            take x(s); println(s);
            put x("5");
            release x
        }
    }
};;
