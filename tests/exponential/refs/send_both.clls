proc main() {
    cut {
        !a(b: close); close b
        |a: ?wait|
        ?a;
        send ch(x. call a(y); wait y; close x);
        call a(z); wait z;
        close ch
        |ch: recv wait; wait|
        recv ch(x);
        wait ch;
        wait x;
        ()
    }
};;
