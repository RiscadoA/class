proc main() {
    cut {
        println("!"); !a(x: close);
        println("close"); close x
        |a: ?wait|
        println("? 1"); ?a;
        par {
            println("fwd"); fwd! b a
            ||
            println("call 2"); call a(y);
            println("wait 2"); wait y;
            ()
        }
        |b: ?wait|
        println("? 2"); ?b;
        println("call 1"); call b(z);
        println("wait 1"); wait z;
        ()
    }
};;
